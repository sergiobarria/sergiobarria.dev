---
import { getCollection } from 'astro:content';

import MainLayout from '~/layouts/MainLayout.astro';
import SocialLinks from '~/shared/components/SocialLinks.astro';
import FeaturedPostCard from '~/shared/components/FeaturedPostCard.astro';
import FeaturedProjects from '~/shared/components/FeaturedProjects.astro';

export const prerender = true;
const blogEntries = await getCollection('blog');
const featuredPosts = blogEntries.filter((entry) => entry?.data?.isFeatured);
---

<MainLayout>
	<section id="hero">
		<div class="max-w-2xl">
			<h1 class="text-4xl font-bold tracking-tight text-zinc-800 dark:text-zinc-100 sm:text-5xl">
				Full-stack Developer, engineer, and amateur writer.
			</h1>
			<p class="mt-6 text-base text-zinc-600 dark:text-zinc-400">
				Iâ€™m Sergio, a full-stack web & mobile developer based in Panama. I work with the JavaScript
				ecosystem, I love to learn new things and share my knowledge with others. Welcome to my
				small space of the internet, where I write and share about different topics related to the
				web.
			</p>
			<SocialLinks size={28} />
		</div>
	</section>

	<!-- Content Grid -->
	<div class="grid grid-cols-1 max-w-xl mx-auto gap-y-20 my-12 lg:max-w-none lg:grid-cols-2">
		<section id="featured-posts">
			<div class="flex flex-col gap-16">
				<h2 class="text-3xl font-bold tracking-tight sm:text-4xl">Featured Posts</h2>
				<!-- {featuredPosts?.map((post) => <PostCard as='' />)} -->
				{featuredPosts?.map((post) => <FeaturedPostCard post={post} />)}
			</div>
		</section>
		<div class="space-y-10 lg:pl-16 xl:pl-24">
			<section id="featured-projects">
				<FeaturedProjects />
			</section>
			<!-- TODO: Create this components -->
			<section id="favorite-stack">favorite stack</section>
			<!-- <section id="latest">latest</section> -->
			<!-- TODO: Newsletter component? ðŸ‘‡ðŸ¼ -->
		</div>
	</div>
</MainLayout>
